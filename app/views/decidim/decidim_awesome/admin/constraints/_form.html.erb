<div class="field" id="constraint-form-<%= params[:id] %>">

  <%= form.select :participatory_space_manifest, participatory_space_manifests.invert, include_blank: true %>
  <%= form.select :participatory_space_slug, participatory_spaces_list(@form.participatory_space_manifest).invert, include_blank: true %>
  <%= form.select :component_manifest, component_manifests.invert, include_blank: true %>

</div>


<script type="text/javascript">

(function() {
  var div = document.getElementById('constraint-form-<%= params[:id] %>');
  var space_manifest = div.getElementsByTagName("select")[0];

  space_manifest.addEventListener('change', function(e) {
  	var event = new CustomEvent("constraint:change", {
  		detail: {
	  		key: "participatory_space_manifest",
	  		value: e.target.value
	  	}
	  });
	  // Dispatch detail as event so main processor will reload accordingly
  	document.body.dispatchEvent(event);
  });
})();

</script>
